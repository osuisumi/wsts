///<jscompress sourcefile="common.js" />
$(document).ready(function(){commonJs.fn.init();$("input,textarea").placeholder();$(".m-selectbox select").simulateSelectBox();$(".m-radio-tick input").bindCheckboxRadioSimulate();$(".m-checkbox-tick input").bindCheckboxRadioSimulate()});var commonJs=$(window).commonJs||{};commonJs.fn={init:function(){this.toTop();this.searchAnimate()},aJumpLayer:function(a){a=$(a);var b=a.innerWidth(),c=a.innerHeight();a.show().css({"margin-top":-c/2+"px","margin-left":-b/2+"px"});$(".m-blackbg").show();a.find(".u-confirm-btn").bind("click",function(){a.hide();$(".m-blackbg").hide()});a.find(".u-cancel-btn").bind("click",function(){a.hide();$(".m-blackbg").hide()});a.find(".u-close-btn").bind("click",function(){a.hide();$(".m-blackbg").hide()})},openABlayer:function(a){a=$(a);var b=$(".m-blackbg"),c=$(window).scrollTop();a.show().css("top",c+100+"px");b.show();this.closeABlayer(a,b)},closeABlayer:function(a,b){var c=a.find(".u-close-btn"),d=a.find(".u-cancel-btn"),e=a.find(".u-confirm-btn");c.on("click",function(){a.hide();b.hide()});d.on("click",function(){a.hide();b.hide()});e.on("click",function(){a.hide();b.hide()})},toTop:function(){$(document).on("click","#toTop",function(){$("html,body").animate({scrollTop:0},100);return!1})},searchAnimate:function(){function a(){$(".m-srh .ipt").on("focus",function(){var a=$(this),b=a.next();""==a.val()&&(a.stop().animate({width:"146px","padding-left":"12px"},500),b.stop().animate({right:"10px"},500))});$(".m-srh .ipt").on("blur",function(){var a=$(this),b=a.next();""==a.val()&&(a.stop().animate({width:"60px","padding-left":"98px"},500),b.stop().animate({right:"100px"},500))})}function b(){$(".m-srh .ipt").on("blur",function(){var a=$(this).parent();""==$(this).val()?a.removeClass("hasValue"):a.addClass("hasValue")})}"Microsoft Internet Explorer"==navigator.appName?a():b()},guideHint:function(a,b){var c=!1;""!=b&&"undefined"!=b&&null!=b&&void 0!=b&&(c=!0);$("body").append(a);$(".g-guide-hint .confirm").on("click",function(){$(this).parents(".g-guide-hint").remove();$(".m-guideShade").remove();c&&b()})}};$.fn.extend({myTab:function(a){a=$.extend({pars:".myTab",tabNav:".tabNav",li:"li",tabCon:".tabCon",tabList:".tabList",cur:"cur",eType:"click",page:0},a);var b=$(this),c=b.find(a.tabNav).find(a.li);tabList=b.find(a.tabCon).find(a.tabList);this.each(function(){c.removeClass(a.cur);c.eq(a.page).addClass(a.cur);tabList.hide();tabList.eq(a.page).show();c.eq(a.page).show();c.on(a.eType,function(){var b=$(this).parents(a.tabNav).find(a.li).index(this);$(this).addClass(a.cur).siblings().removeClass(a.cur);$(this).parents(a.pars).find(a.tabCon).find(a.tabList).eq(b).css({display:"block"}).siblings().css({display:"none"})})});return this}});(function(a){a.fn.simulateSelectBox=function(b){b=a.extend(!0,{selectText:".simulateSelect-text",byValue:null},b);var c=b.selectText,d=b.byValue;return this.each(function(){var b=a(this);b.find("option").prop("selected",!1);if(""==d||null==d||void 0==d)b.find("option").eq(0).prop("selected",!0);else for(var f=0;f<b.find("option").length;f++)b.find("option").eq(f).val()==d&&b.find("option").eq(f).prop("selected",!0);b.parent().find(c).text(b.find('option[selected\x3d"selected"]').text());b.parent().find(c).text(b.find("option:selected").text())}).on("change",function(){a(this).parent().find(c).text(a(this).find("option:selected").text())})}})(jQuery);(function(a){a.fn.bindCheckboxRadioSimulate=function(b){function c(b){var c;void 0!=b.attr("type")&&(c=b.attr("type"),"checkbox"==c?b.prop("checked")?d.checkbox_checked_fn(b):d.checkbox_nochecked_fn(b):"radio"==c&&void 0!=b.attr("name")&&(c=b.attr("name"),b.prop("checked")?(d.radio_checked_fn(b),a("input[name\x3d'"+c+"']").not(b).each(function(){d.radio_nochecked_fn(a(this))})):d.radio_nochecked_fn(b)))}var d={className:"on",onclick:null,checkbox_checked_fn:function(a){a.parent().addClass(this.className)},checkbox_nochecked_fn:function(a){a.parent().removeClass(this.className)},radio_checked_fn:function(a){a.parent().addClass(this.className)},radio_nochecked_fn:function(a){a.parent().removeClass(this.className)}};a.extend(!0,d,b);return this.each(function(){c(a(this))}).click(function(){c(a(this));if(d.onclick)d.onclick(this,{isChecked:a(this).prop("checked"),objThis:a(this)})})}})(jQuery);(function(a,b,c){function d(a){var b={},d=/^jQuery\d+$/;c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)});return b}function e(a,d){var e=c(this);if(this.value==e.attr("placeholder")&&e.hasClass("placeholder"))if(e.data("placeholder-password")){e=e.hide().next().show().attr("id",e.removeAttr("id").data("placeholder-id"));if(!0===a)return e[0].value=d;e.focus()}else this.value="",e.removeClass("placeholder"),this==b.activeElement&&this.select()}function f(){var a,b=c(this),f=this.id;if(""==this.value){if("password"==this.type){if(!b.data("placeholder-textinput")){try{a=b.clone().attr({type:"text"})}catch(h){a=c("\x3cinput\x3e").attr(c.extend(d(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":f}).bind("focus.placeholder",e);b.data({"placeholder-textinput":a,"placeholder-id":f}).before(a)}b=b.removeAttr("id").hide().prev().attr("id",f).show()}b.addClass("placeholder");b[0].value=b.attr("placeholder")}else b.removeClass("placeholder")}var h="placeholder"in b.createElement("input"),k="placeholder"in b.createElement("textarea"),g=c.fn,l=c.valHooks;h&&k?(g=g.placeholder=function(){return this},g.input=g.textarea=!0):(g=g.placeholder=function(){this.filter((h?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":f}).data("placeholder-enabled",!0).trigger("blur.placeholder");return this},g.input=h,g.textarea=k,g={get:function(a){var b=c(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var h=c(a);if(!h.data("placeholder-enabled"))return a.value=d;""==d?(a.value=d,a!=b.activeElement&&f.call(a)):h.hasClass("placeholder")?e.call(a,!0,d)||(a.value=d):a.value=d;return h}},h||(l.input=g),k||(l.textarea=g),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(e);setTimeout(function(){a.each(f)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))})(this,document,jQuery);String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.equalsIgnoreCase=function(a){return this.toLowerCase()==a.toLowerCase()};$.extend({ajaxQuery:function(a,b,c,d){if(null==d||""==d)d="get";$.ajax({url:$("#"+a).attr("action"),data:$("#"+a).serialize(),type:d,success:function(a){$("#"+b).html(a);void 0!=c&&(a=c,$.isFunction(a)||(a=eval("("+c+")")),a())}})},ajaxSubmit:function(a){var b=$("#"+a).serialize(),c=$("#"+a).attr("method");if("delete"==c||"DELETE"==c||"put"==c||"PUT"==c)b="_method\x3d"+c+"\x26"+b;return $.ajax({url:$("#"+a).attr("action"),data:b,type:"post",async:!1,beforeSend:function(){ajaxLoading()},success:function(a){},complete:function(){ajaxEnd()}}).responseText},ajaxDelete:function(a,b,c){$.ajax({url:a,type:"post",data:"_method\x3dDELETE\x26"+b,success:function(a){if(void 0!=c){var b=c;$.isFunction(b)||(b=eval("("+c+")"));b(a)}}})},put:function(a,b,c){$.ajax({url:a,type:"post",data:"_method\x3dPUT\x26"+b,success:function(a){if(void 0!=c){var b=c;$.isFunction(b)||(b=eval("("+c+")"));b(a)}}})}});function ajaxLoading(){mylayerFn.loading({id:999,content:"\u6b63\u5728\u52a0\u8f7d\u4e2d...",shade:[.4,"#ccc"]})}function ajaxEnd(){mylayerFn.close(999)}function assignParam(a,b){$.each($("#"+a+" :input"),function(){$(this).val($("#"+$(this).attr("id")+"_"+b).text())})}function checkAllBox(a,b){$(b).click(function(){$(this).prop("checked")?$("#"+a+" :checkbox").each(function(){$(this).prop("checked",!0)}):$("#"+a+" :checkbox").each(function(){$(this).prop("checked",!1)})})}function initLimit(a,b,c,d){a.keyup(function(){var e=a.val(),f=0;if(c){for(var h=0;h<e.length;h++)255<e.charCodeAt(h)?f+=2:f++;e=Math.floor((b-f)/2)}else f=e.length,e=b-f;d(e)})}function guid(){return(G()+G()+""+G()+""+G()+""+G()+""+G()+G()+G()).toUpperCase()}function G(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function hintJumpLayer(){$(".m-blackbg").show();var a=$(".g-layer-warning"),b=a.innerWidth(),c=a.innerHeight();a.show().css({"margin-top":-c/2+"px","margin-left":-b/2+"px"})}window.alert=function(a,b,c){if(null==c||""==c)c=1500;mylayerFn.msg(a,{time:c},b)};window.confirm=function(a,b,c){mylayerFn.confirm({content:a,icon:3,yesFn:b,cancelFn:c})};function getByteLength(a){for(var b=a.trim().length,c=0;c<a.length;c++)127<a.charCodeAt(c)&&(b+=2);return b}function getSuffix(a){var b=a.lastIndexOf(".");return a.substring(b+1,a.length)}function getOuterHtml(a){for(var b=$("\x3cdiv\x3e\x3c/div\x3e"),c=0;c<a.length;c++)b.append($(a[c]).clone());return b.html()}function isMatchJson(a){return a.match("^{(.+:.+,*){1,}}$")?!0:!1}function closeLayer(){var a=parent.layer.getFrameIndex(window.name);parent.layer.close(a)}function downloadFile(a,b,c,d){$('#downloadFileForm input[name\x3d"id"]').val(a);$('#downloadFileForm input[name\x3d"fileName"]').val(b);$('#downloadFileForm input[name\x3d"fileRelations[0].type"]').val(c);$('#downloadFileForm input[name\x3d"fileRelations[0].relation.id"]').val(d);$("#downloadFileForm").submit()}function updateFile(a,b){$('#updateFileForm input[name\x3d"id"]').val(a);$('#updateFileForm input[name\x3d"fileName"]').val(b);$.post("/file/updateFileInfo.do",$("#updateFileForm").serialize())}function deleteFileRelation(a,b,c){$('#deleteFileRelationForm input[name\x3d"fileId"]').val(a);$('#deleteFileRelationForm input[name\x3d"relation.id"]').val(b);$('#deleteFileRelationForm input[name\x3d"type"]').val(c);$.post("/file/deleteFileRelation.do",$("#deleteFileRelationForm").serialize())}function deleteFileInfo(a){$('#deleteFileInfoForm input[name\x3d"id"]').val(a);$.post("/file/deleteFileInfo.do",$("#deleteFileInfoForm").serialize())}function createCourseIndex(){window.location.href="/make/course?orders\x3dCREATE_TIME.DESC"}function previewFile(a){mylayerFn.open({type:2,title:"\u9884\u89c8\u6587\u4ef6",fix:!0,area:[99*$(window).width()/100,99*$(window).height()/100],content:"/file/previewFile?fileId\x3d"+a,shadeClose:!0})}function loadComments(a){$("#commentsDiv").load($("#ctx").val()+"/comment/activity/"+a,"orders\x3dCREATE_TIME.DESC")}function goEditUser(a){mylayerFn.open({type:2,title:"\u4e2a\u4eba\u8d44\u6599",fix:!1,area:[650,$(window).height()],content:"wsts/userInfo/"+a+"/edit",shadeClose:!0})}function goChangePassword(){mylayerFn.open({type:2,title:"\u4fee\u6539\u5bc6\u7801",fix:!1,area:[620,480],content:"/wsts/account/edit_password"})}function downLoadTemplate(a){$('#downloadTemplateFileForm input[name\x3d"fileName"]').val(a);$("#downloadTemplateFileForm").submit()}function FileResourceNAV(){this.bars=[];this.push=function(a,b,c){var d={};d.frId=a;d.frName=b;this.bars.push(d);c&&c()};this.pop=function(a){var b=this.bars.pop();a&&a();return b};this.getLast=function(){return 0>=this.bars.length?void 0:this.bars[this.bars.length-1]};this.jump=function(a,b){for(var c=!0;c;){if(0>=this.bars.length)return;this.bars[this.bars.length-1].frId!=a?this.pop():c=!1}b&&b()};this.flush=function(){this.bars=[]}}$(document).ready(function(){activityJs.fn.init()});var activityJs=$(window).activityJs||{};activityJs.fn={init:function(){this.set_tag();this.high_options();this.drop_down_box();this.countDown();this.commentOpa(".am-comment-box");this.commentOpa(".am-isComment-box");this.commentShow()},set_tag:function(){$(".am-add-tag").each(function(){var a=$(this);$ipt_parents=a.find(".am-tagipt");$ipt=$ipt_parents.find(".au-ipt");$hint_lst=$ipt_parents.find(".l-slt-lst");$add_btn=a.find(".au-add-tag");$tag_lst=a.find(".am-tag-lst");activityJs.fn.tag_hint_show($ipt,$hint_lst);activityJs.fn.add_tag($ipt,$add_btn,$tag_lst);activityJs.fn.delete_tag($tag_lst)})},tag_hint_show:function(a,b){a.on("focus",function(){""==!$(this).val()&&b.show()});a.on("keyup",function(){""==!$(this).val()?b.show():b.hide()});this.tag_hint_hide(a,b)},tag_hint_hide:function(a,b){$(document).on("click",function(c){c=$(c.target);0==c.closest(b).length&&0==c.closest(a).length&&b.hide()});b.on("click","a",function(){b.hide();a.val($(this).text())})},add_tag:function(a,b,c){b.on("click",function(){var b=!1,e=c.children().length;if(""!=a.val()){for(var f=0;f<e;f++)a.val()==c.children().eq(f).find(".txt").text()&&(alert("\u5df2\u6709\u76f8\u540c\u6807\u7b7e"),a.val(""),a.focus(),b=!0);b||(c.append('\x3cli\x3e\x3cspan class\x3d"txt"\x3e'+a.val()+'\x3c/span\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"dlt" title\x3d"\u5220\u9664\u6807\u7b7e"\x3e\u00d7\x3c/a\x3e\x3c/li\x3e'),a.val(""))}})},delete_tag:function(a){a.on("click",".dlt",function(){$(this).parent().remove()})},high_options:function(){var a=$(".ag-high-options"),b=a.find(".au-high-option"),c=a.find(".ag-high-lst");b.on("click",function(){_ts=$(this);_ts.hasClass("z-crt")?(_ts.removeClass("z-crt"),c.hide()):(_ts.addClass("z-crt"),c.show())})},drop_down_box:function(){$(".am-slt-lst").each(function(){var a=$(this),b=a.children(".show"),c=b.children(".txt"),d=a.children(".lst");d.children("a");b.on("click",function(){var e=$(this);e.hasClass("z-crt")?(d.hide(),e.removeClass("z-crt")):(d.show(),e.addClass("z-crt"));$(document).on("click",function(c){0==$(c.target).closest(a).length&&(d.hide(),b.removeClass("z-crt"))});a.on("click",".lst a",function(){d.hide();b.removeClass("z-crt");c.text($(this).text());$(this).addClass("z-crt").siblings().removeClass("z-crt")})})})},countDown:function(){var a=$(".am-count-down"),b=a.find(".endTime"),c=a.find(".day"),d=a.find(".hour"),e=a.find(".minute"),f=a.find(".second"),h=new Date(b.val()),a=new Date,a=parseInt((h.getTime()-a.getTime())/1E3),b=parseInt(a/86400),k=parseInt(a/3600%24),g=parseInt(a/60%60),l=parseInt(a%60);c.text(b);d.text(k);e.text(g);f.text(l);10>b&&c.text("0"+b);10>k&&d.text("0"+k);10>g&&e.text("0"+g);10>l&&f.text("0"+l);1>a&&(clearTimeout(m),c.text("00"),d.text("00"),e.text("00"),f.text("00"));var m=setInterval(function(){var a=new Date,a=parseInt((h.getTime()-a.getTime())/1E3),b=parseInt(a/86400),g=parseInt(a/3600%24),k=parseInt(a/60%60),l=parseInt(a%60);c.text(b);d.text(g);e.text(k);f.text(l);10>b&&c.text("0"+b);10>g&&d.text("0"+g);10>k&&e.text("0"+k);10>l&&f.text("0"+l);1>a&&(clearTimeout(m),c.text("00"),d.text("00"),e.text("00"),f.text("00"))},1E3)},commentOpa:function(a){$(a+" .au-textarea").on("focus",function(){var b=$(this),c=b.parents(a),d=c.find(".comment-placeholder"),e=c.find(".am-cmtBtn-block");c.find(".au-face");c.find(".au-cmtPublish-btn");d.stop().animate({opacity:"0"},200,function(){$(this).hide()});b.stop().animate({height:"76px"},200,function(){e.show()});$(document).on("click",function(c){0==$(c.target).closest(a).length&&""==b.val()&&(d.stop().animate({opacity:"1"},200,function(){$(this).show()}),b.stop().animate({height:"22px"},100,function(){e.hide()}))})})},commentShow:function(){var a=$(".ag-cmt-lst-p").children("li"),b=a.find(".au-comment"),c=a.find(".ag-is-comment");a.each(function(){var a=$(this),e=a.find(".au-comment"),f=a.find(".ag-is-comment");f.innerHeight();e.on("click",function(){var a=$(this).closest("ul").attr("relationId"),d=$(this).closest("li").attr("commentId"),e=$("#"+d+"_childComment");0>=e.find("li").size()&&e.load($("#ctx").val()+"/comment/activity/child","mainId\x3d"+d+"\x26relationId\x3d"+a);a=$(this);a.hasClass("z-crt")?(a.removeClass("z-crt"),f.hide()):(c.hide(),b.removeClass("z-crt"),a.addClass("z-crt"),f.find(".au-comment-trg").css("left",Math.ceil(a.position().left)-25),f.show())})})},aJumpLayer:function(a){a=$(a);var b=a.innerWidth(),c=a.innerHeight();a.show().css({"margin-top":-c/2+"px","margin-left":-b/2+"px"});$(".ag-blackbg").show().css("opacity","0.5");a.find(".au-confirm-btn").bind("click",function(){a.hide();$(".ag-blackbg").hide().css("opacity","1")});a.find(".au-cancel-btn").bind("click",function(){a.hide();$(".ag-blackbg").hide().css("opacity","1")});a.find(".au-close-btn").bind("click",function(){a.hide();$(".ag-blackbg").hide().css("opacity","1")})},openABlayer:function(a){a=$(a);var b=$(".ag-whitebg"),c=$(window).scrollTop();a.show().css("top",c+100+"px");b.show();this.closeABlayer(a,b)},closeABlayer:function(a,b){var c=a.find(".au-closelayer-ico"),d=a.find(".au-cancel-btm");c.on("click",function(){a.hide();b.hide()});d.on("click",function(){a.hide();b.hide()})}};$.fn.extend({myTab:function(a){a=$.extend({pars:".myTab",tabNav:".tabNav",li:"li",tabCon:".tabCon",tabList:".tabList",cur:"cur",eType:"click",page:0},a);var b=$(this),c=b.find(a.tabNav).find(a.li);tabList=b.find(a.tabCon).find(a.tabList);this.each(function(){c.removeClass(a.cur);c.eq(a.page).addClass(a.cur);tabList.hide();tabList.eq(a.page).show();c.eq(a.page).show();c.on(a.eType,function(){var b=$(this).parents(a.tabNav).find(a.li).index(this);$(this).addClass(a.cur).siblings().removeClass(a.cur);$(this).parents(a.pars).find(a.tabCon).find(a.tabList).eq(b).css({display:"block"}).siblings().css({display:"none"})})});return this}});